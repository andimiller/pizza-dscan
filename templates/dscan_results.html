{% extends "base.html" %}
{% block title %}D-Scan - PIZZA Toolbox{% endblock %}
{% block header %}Results{% if system %} - {{ system }}{% endif %}{% endblock %}
{% block body %}
<style>
	.indent {
		padding-left: 35px;
		background-color: #f9f9f9;
	}
	.black-link {
		color: black !important;
	}
	.remove-lower-margin {
		margin-bottom: 0px !important;
	}
	.badge {
		background-color: #222222 !important;
	}

</style>

{% set counter = 0 %}
{% set category = "Ship" %}
<div class="progress">
	{% for item, value, color in categories[category] %}
	<a id="{{ item|replace(" ","") }}-pb" data-toggle="tooltip" data-container="body" class="progress-bar" title="{{ item }} - {{ value }}" style="width: {{ (value/sums[category]*100) }}%; background-color: {{ color_variant("#d94f79", brightness_offset=counter) }}; ">
		<span class="sr-only">{{ item }} - {{ value }}</span>
	</a>
	{% set counter = counter + 10 %}
	{% endfor %}
</div>

<ul class="nav nav-tabs">
	<li><a onClick="$('.remove-lower-margin').collapse('show') | $('.remove-lower-margin').collapse('hide')" class="button button-primary">Toggle All</a></li>
	<li class="active"><a href="#unmerged" data-toggle="tab">Unmerged</a></li>
	<li><a href="#merged" data-toggle="tab">Merged</a></li>
</ul>
<div class="tab-content row">
	<div class="tab-pane fade active in active" id="unmerged">
		{% for category in categorylist %}
			<div class="col-md-4">
				<div class="panel panel-primary">
					<div class="panel-heading"><span class="panel-title">{{ category }}<span class="badge pull-right">{{ sums[category] }}</span></span></div>
					<div class="panel-body">
						<ul class="list-group">
							{% for item, value, colour in categories[category] %}
							<a class="list-group-item black-link" data-toggle="collapse" data-target="#{{ item|replace(" ","") }}"><span class="text{{ color }}"><i class="icon-list"></i> {{ item }}</span><span class="badge pull-right">{{ value }}</span></a>
								<ul class="list-group remove-lower-margin collapse" id="{{ item|replace(" ","") }}">
									{% for i, v, c in groups[item] %}
									<li class="list-group-item indent">{{ i }}<span class="badge pull-right" ><span class="text{{ c }}">{{ v }}</span></span></li>
									{% endfor %}
								</ul>
							{% endfor %}
						<ul>
					</div>
				</div>
			</div>
		{% endfor %}
	</div>
	<div class="tab-pane fade in" id="merged">
		{% for category in categorylist %}
			<div class="col-md-4">
				<div class="panel panel-primary">
					<div class="panel-heading"><span class="panel-title">{{ category }}<span class="badge pull-right">{{ sums[category] }}</span></span></div>
					<div class="panel-body">
						<ul class="list-group">
							{% for item, value, colour in categorywide[category] %}
								<li class="list-group-item">{{ item }}<span class="badge pull-right" ><span class="text{{ colour }}">{{ value }}</span></span></li>
							{% endfor %}
						<ul>
					</div>
				</div>
			</div>
		{% endfor %}
	</div>


</div>

<script>
// $(".hoverDiv").tooltip();
{% for category in categorylist %}
	{% for item, value, colour in categories[category] %}
		$('#{{ item|replace(" ","") }}').on('show.bs.collapse', function() {
			$("#{{ item|replace(" ","") }}-pb")[0].style.visibility="visible";
		})
		$('#{{ item|replace(" ","") }}').on('hide.bs.collapse', function() {
			$("#{{ item|replace(" ","") }}-pb")[0].style.visibility="hidden";
		})
	{% endfor %}
{% endfor %}
</script>


{% endblock %}
